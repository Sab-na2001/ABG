<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Sample Quarkus on Heroku</title>
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
</head>
<body>
    <p> You have to do the steps in order : create then movepiece </p>
    
	<h2>New Game</h2>
	<form action="v0/api/v1/game/new" method="post">
		<div>
    		<label for="duration">Duration : </label>
    		<input name="duration" id="say" value="10">
  		</div>
 		<div>
    		<label for="increment">Increment :</label>
    		<input name="increment" id="increment" value="10">
  		</div>
		<input type="submit" value="Create game">
	</form>
	
	<h2>GET initial position</h2>
	<p> If you want to get position of any game , you need to click on get Position then change its ID in the URL (by default it is 1) </p>
	<p>
		<a href="v0/api/v1/game/1">get Position</a>
	</p>
	
	
	<h2>Move a piece</h2>
	<form action="http://localhost:8080" method="post" name="myForm" id="myForm">
		<div>
    		<label for="id">ID of game : </label>
    		<input name="id" id="id" value="1">
  		</div>
		<div>
    		<label for="from">Move piece from : </label>
    		<input name="from" id="from" value="E4">
  		</div>
 		<div>
    		<label for="to">to :</label>
    		<input name="to" id="to" value="E5">
  		</div>
  		<div>
    		<label for="promotion">Promotion</label>
    		<input name="promotion" id="promotion" value="WHITE_PAWN">
  		</div>
  		
		<input id="submit" type="button" name="submit" value="move piece">
	</form>
	
	
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
	<script>
    $(document).ready(function(){
        //click on button submit
        $("#submit").on('click', function(){
            //send ajax
            let id = $("#id").val();
            let from = $("#from").val();
			let to = $("#to").val();
			let promotion = $("#promotion").val();
			var obj = {
    			"from": from,
    			"to": to,
    			"promotion": promotion
			}
			let url = "v0/api/v1/game/" + id + "/move";
			console.log(url);
            $.ajax({
                url: url, //url where to submit the request
                type : "POST", //type of action POST || GET
                dataType : 'json', //data type
                contentType: 'application/json',
                data : JSON.stringify(obj),
                success : function(result) {
                    //you can see the result from the console
                    //tab of the developer tools
                    window.alert("piece moved, Use buttun moves to see"); 
                },
                error: function(xhr, resp, text) {
                    console.log(obj);
                }
            })
        });
    });
</script>

	<h2>GET Moves</h2>
	<p> If you want to get  moves of any game, you need to click on Moves then  change its ID in the URL (by default it is 1) </p>
	<p>
		<a href="v0/api/v1/game/1/moves">Moves</a>
	</p>
	
	<h2>GET Remaining time player</h2>
	<p>
		To test this function, please don't play any move, beacause it need to be a valid move !
	</p>
	<form action="http://localhost:8080" method="post" name="myForm" id="myForm2">
		<div>
    		<label for="id2">ID of game : </label>
    		<input name="id2" id="id2" value="1">
  		</div>
 		<div>
    		<label for="side">Side : black or white</label>
    		<input name="side" id="side" value="white">
  		</div>
  		
		<input id="submit2" type="button" name="submit2" value="Get Time">
	</form>
	
	
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
	<script>
    $(document).ready(function(){
        //click on button submit
        $("#submit2").on('click', function(){
            //send ajax
            let id2 = $("#id2").val();
			let side = $("#side").val();
			var url = "v0/api/v1/game/" + id2 + "/clock/" + side ;
			console.log(id2);
            $.ajax({
                url: url, //url where to submit the request
                type : "GET", //type of action POST || GET
                dataType : 'json', //data type
                contentType: 'application/json',
                success : function(result) {
                    //you can see the result from the console
                    //tab of the developer tools
                    $divb = ("<div>" + side + " : " + result + "</div>");
                    $("body").append($divb);   
                },
                error: function(xhr, resp, text) {
                    console.log(url);
                }
            })
        });
    });
</script>
	
	
	
</body>
</html>